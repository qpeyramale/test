<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_picking_out_form" model="ir.ui.view">
            <field name="name">stock.picking.out.form</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref="stock.view_picking_out_form" />
            <field eval="100" name="priority"/>
            <field name="arch" type="xml">
                <notebook position="inside">
                    <page string="Produits finis" invisible="1">
                        <field name="order_line_ids" domain="[('produit_fini','=',True)]" nolabel="1"/>
                    </page>
                </notebook>
                <page string="Additional Info" position="inside">
                    <group attrs="{'invisible': [('affranchissement_machine','=',False)]}">
                        <group>
                            <field name="affranchissement_machine" invisible="1"/>
                            <field name="affranchissement_dispense" invisible="1"/>
                            <field name="index_affran_depart"/>
                            <field name="index_affran_arrive"/>
                            <field name="cumul_affran"/>
                        </group>
                        <group>
                        </group>
                    </group>
                </page>
            </field>
        </record>
        
        <menuitem id="menu_stock_affran" name="Affranchissement"  sequence="71"/>
        <menuitem id="menu_stock_warehouse_mgmt_affran" name="Affranchissement" parent="menu_stock_affran" sequence="1"/><!--parent="stock.menu_stock_root"-->
        <menuitem id="menu_action_picking_tree_affran_machine" name="BL affranchissement machine" parent="menu_stock_warehouse_mgmt_affran" sequence="1"/>
        <menuitem id="menu_action_picking_tree_affran_dispense" name="BL affranchissement dispense" parent="menu_stock_warehouse_mgmt_affran" sequence="2"/>
        
        <record id="view_picking_out_tree_affran_machine" model="ir.ui.view">
            <field name="name">stock.picking.out.tree.affran.machine</field>
            <field name="model">stock.picking.out</field>
            <field name="arch" type="xml">
                <tree colors="blue:state == 'draft';grey:state == 'cancel';red:state not in ('cancel', 'done') and min_date &lt; current_date" string="Delivery Orders" create="false">
                    <field name="name"/>
                    <field name="partner_id" string="Customer"/>
                    <field name="origin"/>
                    <field name="min_date"/>
                    <field name="date"/>
                    <field name="backorder_id"/>
                    <field name="stock_journal_id" groups="account.group_account_user"/>
                    <field name="invoice_state"/>
                    <field name="index_affran_arrive"/>
                    <field name="cumul_affran"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record id="action_picking_tree_affran_machine" model="ir.actions.act_window">
            <field name="name">Tous</field>
            <field name="res_model">stock.picking.out</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','out'),('affranchissement_machine','=',True)]</field>
            <field name="context">{'default_type': 'out', 'contact_display': 'partner_address','default_affranchissement_machine':True}</field>
            <field name="search_view_id" ref="stock.view_picking_out_search"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a delivery order. 
              </p><p>
                This is the list of all delivery orders that have to be
                prepared, according to your different sales orders and your
                logistics rules.
              </p>
            </field>
        </record>
        <record id="action_picking_tree_out_view1_waiting_affran_machine" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree_affran_machine"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_affran_machine" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="stock.view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_cal_affran_machine" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="stock.stock_picking_out_calendar"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine"/>
        </record>
        
        <menuitem action="action_picking_tree_affran_machine" id="menu_action_picking_tree_affran_machine_tous" parent="menu_action_picking_tree_affran_machine" sequence="1"/>
        
        <record id="view_picking_out_tree_affran_machine_devis" model="ir.ui.view">
            <field name="name">stock.picking.out.tree.affran.machine.devis</field>
            <field name="model">stock.picking.out</field>
            <field name="arch" type="xml">
                <tree colors="blue:state == 'draft';grey:state == 'cancel';red:state not in ('cancel', 'done') and min_date &lt; current_date" string="Delivery Orders" create="false">
                    <field name="name"/>
                    <field name="partner_id" string="Customer"/>
                    <field name="origin"/>
                    <field name="min_date"/>
                    <field name="date"/>
                    <field name="backorder_id"/>
                    <field name="stock_journal_id" groups="account.group_account_user"/>
                    <field name="invoice_state"/>
                    <field name="index_affran_arrive"/>
                    <field name="cumul_affran"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record id="action_picking_tree_affran_machine_devis" model="ir.actions.act_window">
            <field name="name">Devis</field>
            <field name="res_model">stock.picking.out</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','out'),('affranchissement_machine','=',True),('type_affran','=','devis')]</field>
            <field name="context">{'default_type': 'out', 'contact_display': 'partner_address','default_affranchissement_machine':True,'default_type_affran':'devis'}</field>
            <field name="search_view_id" ref="stock.view_picking_out_search"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a delivery order. 
              </p><p>
                This is the list of all delivery orders that have to be
                prepared, according to your different sales orders and your
                logistics rules.
              </p>
            </field>
        </record>
        <record id="action_picking_tree_out_view1_waiting_affran_machine_devis" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree_affran_machine_devis"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine_devis"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_affran_machine_devis" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="stock.view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine_devis"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_cal_affran_machine_devis" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="stock.stock_picking_out_calendar"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine_devis"/>
        </record>
        
        <menuitem action="action_picking_tree_affran_machine_devis" id="menu_action_picking_tree_affran_machine_devis" parent="menu_action_picking_tree_affran_machine" sequence="2"/>
       
       <record id="view_picking_out_tree_affran_machine_mensuel" model="ir.ui.view">
            <field name="name">stock.picking.out.tree.affran.machine.mensuel</field>
            <field name="model">stock.picking.out</field>
            <field name="arch" type="xml">
                <tree colors="blue:state == 'draft';grey:state == 'cancel';red:state not in ('cancel', 'done') and min_date &lt; current_date" string="Delivery Orders" create="false">
                    <field name="name"/>
                    <field name="partner_id" string="Customer"/>
                    <field name="origin"/>
                    <field name="produit_machine"/>
                    <field name="min_date"/>
                    <field name="date"/>
                    <field name="backorder_id"/>
                    <field name="stock_journal_id" groups="account.group_account_user"/>
                    <field name="invoice_state"/>
                    <field name="index_affran_arrive"/>
                    <field name="cumul_affran"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
       
        <record id="action_picking_tree_affran_machine_mensuel" model="ir.actions.act_window">
            <field name="name">Mensuel</field>
            <field name="res_model">stock.picking.out</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','out'),('affranchissement_machine','=',True),('type_affran','=','mensuel')]</field>
            <field name="context">{'default_type': 'out', 'contact_display': 'partner_address','default_affranchissement_machine':True,'default_type_affran':'mensuel','search_default_available':1}</field>
            <field name="search_view_id" ref="stock.view_picking_out_search"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a delivery order. 
              </p><p>
                This is the list of all delivery orders that have to be
                prepared, according to your different sales orders and your
                logistics rules.
              </p>
            </field>
        </record>
        <record id="action_picking_tree_out_view1_waiting_affran_machine_mensuel" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree_affran_machine_mensuel"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine_mensuel"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_affran_machine_mensuel" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="stock.view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine_mensuel"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_cal_affran_machine_mensuel" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="stock.stock_picking_out_calendar"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine_mensuel"/>
        </record>
        
        <menuitem action="action_picking_tree_affran_machine_mensuel" id="menu_action_picking_tree_affran_machine_mensuel" parent="menu_action_picking_tree_affran_machine" sequence="3"/>

        <record id="view_picking_out_tree_affran_machine_seul" model="ir.ui.view">
            <field name="name">stock.picking.out.tree.affran.seul</field>
            <field name="model">stock.picking.out</field>
            <field name="arch" type="xml">
                <tree colors="blue:state == 'draft';grey:state == 'cancel';red:state not in ('cancel', 'done') and min_date &lt; current_date" string="Delivery Orders">
                    <field name="name"/>
                    <field name="partner_id" string="Customer"/>
                    <field name="origin"/>
                    <field name="min_date"/>
                    <field name="date"/>
                    <field name="backorder_id"/>
                    <field name="stock_journal_id" groups="account.group_account_user"/>
                    <field name="invoice_state"/>
                    <field name="index_affran_arrive"/>
                    <field name="cumul_affran"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record id="action_picking_tree_affran_machine_seul" model="ir.actions.act_window">
            <field name="name">Seul</field>
            <field name="res_model">stock.picking.out</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','out'),('affranchissement_machine','=',True),('type_affran','=','seul')]</field>
            <field name="context">{'default_type': 'out', 'contact_display': 'partner_address','default_affranchissement_machine':True,'default_type_affran':'seul'}</field>
            <field name="search_view_id" ref="stock.view_picking_out_search"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a delivery order. 
              </p><p>
                This is the list of all delivery orders that have to be
                prepared, according to your different sales orders and your
                logistics rules.
              </p>
            </field>
        </record>
        <record id="action_picking_tree_out_view1_waiting_affran_machine_seul" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree_affran_machine_seul"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine_seul"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_affran_machine_seul" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="stock.view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine_seul"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_cal_affran_machine_seul" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="stock.stock_picking_out_calendar"/>
            <field name="act_window_id" ref="action_picking_tree_affran_machine_seul"/>
        </record>
        
        <menuitem action="action_picking_tree_affran_machine_seul" id="menu_action_picking_tree_affran_machine_seul" parent="menu_action_picking_tree_affran_machine" sequence="4"/>
        
<!--
        <record id="view_picking_out_tree_affran_dispense" model="ir.ui.view">
            <field name="name">stock.picking.out.tree.affran.dispense</field>
            <field name="model">stock.picking.out</field>
            <field name="arch" type="xml">
                <tree colors="blue:state == 'draft';grey:state == 'cancel';red:state not in ('cancel', 'done') and min_date &lt; current_date" string="Delivery Orders">
                    <field name="name"/>
                    <field name="partner_id" string="Customer"/>
                    <field name="origin"/>
                    <field name="min_date"/>
                    <field name="date"/>
                    <field name="backorder_id"/>
                    <field name="stock_journal_id" groups="account.group_account_user"/>
                    <field name="invoice_state"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
-->
        
        <record id="action_picking_tree_affran_dispense" model="ir.actions.act_window">
            <field name="name">BL affranchissement dispense</field>
            <field name="res_model">stock.picking.out</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','out'),('affranchissement_dispense','=',True)]</field>
            <field name="context">{'default_type': 'out', 'contact_display': 'partner_address','default_affranchissement_dispense':True}</field>
            <field name="search_view_id" ref="stock.view_picking_out_search"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a delivery order. 
              </p><p>
                This is the list of all delivery orders that have to be
                prepared, according to your different sales orders and your
                logistics rules.
              </p>
            </field>
        </record>
        <record id="action_picking_tree_out_view1_waiting_affran_dispense" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="stock.view_picking_out_tree"/>
            <field name="act_window_id" ref="action_picking_tree_affran_dispense"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_affran_dispense" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="stock.view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree_affran_dispense"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_cal_affran_dispense" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="stock.stock_picking_out_calendar"/>
            <field name="act_window_id" ref="action_picking_tree_affran_dispense"/>
        </record>
        <menuitem action="action_picking_tree_affran_dispense" id="menu_action_picking_tree_affran_dispense" parent="menu_stock_warehouse_mgmt_affran" sequence="2"/>
        
        <record id="stock.action_picking_tree" model="ir.actions.act_window">
            <field name="domain">[('type','=','out'),('affranchissement_machine','=',False),('affranchissement_dispense','=',False)]</field>
        </record>
        
    </data>
</openerp>
