<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        
         <record id="view_quotation_tree" model="ir.ui.view">
            <field name="name">sale.order.tree.simpac</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_quotation_tree" />
            <field name="priority">100</field>
            <field name="arch" type="xml">
                <field name="state" position="before">
                    <field name="contrat_cadre"/>
                </field>
            </field>
        </record>
        
        <record id="view_order_form" model="ir.ui.view">
            <field name="name">sale.order.form.simpac</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form" />
            <field name="arch" type="xml">
                <field name="state" position="before">
                    <button name="%(action_view_configurator)d" string="Configurateur"
                    type="action" states="draft" class="oe_highlight" groups="base.group_user"/>
                </field>
                <field name="client_order_ref" position="after">
                    <field name="contrat_cadre" on_change="onchange_contrat_cadre(contrat_cadre)"/>
                </field>
                <notebook position="inside">
                    <page string="Configurations">
                        <field name="configurator_ids" attrs="{'readonly': [('state', '!=', 'draft')]}" nolabel="1">
                            <tree editable="top" create="false">
                                <field name="name" readonly="1"/>
                                <button name="%(action_view_configurator)d" string="Editer la configuration"
                                type="action" icon="gtk-select-color" groups="base.group_user"/>
                            </tree>
                        </field>
                    </page>
                </notebook>
                <xpath expr="//field[@name='order_line']/form//field[@name='price_unit']" position="after">
                    <field name="configurator_id" invisible="1"/>
                    <field name="composant" invisible="1" readonly="1"/>
                    <field name="produit_fini" invisible="1" readonly="1"/>
                    <field name="affranchissement_machine" invisible="0" readonly="1"/>
                    <field name="affranchissement_dispense" invisible="0" readonly="1"/>
                </xpath>
<!--
                <xpath expr="//field[@name='order_line']/tree//field[@name='price_unit']" position="after">
                    <field name="configurator_id" invisible="0"/>
                    <field name="composant" invisible="0"/>
                </xpath>
-->
                
            </field>
        </record>
        
        <record id="view_order_line_form2" model="ir.ui.view">
            <field name="name">sale.order.line.form2</field>
            <field name="model">sale.order.line</field>
            <field name="inherit_id" ref="sale.view_order_line_form2" />
            <field name="arch" type="xml">
                <field name="invoiced" position="after">
                    <field name="composant" readonly="1"/>
                    <field name="produit_fini" readonly="1"/>
                </field>
            </field>
        </record>
    </data>
</openerp>
